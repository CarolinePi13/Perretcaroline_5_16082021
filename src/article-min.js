const objectUrl=window.location.search,articleId=objectUrl.slice(1);let articleData=[];const fetchSingleArticle=async()=>{await fetch(`http://localhost:3000/api/cameras/${articleId}`).then((e=>e.json())).then((e=>{articleData=e,document.querySelector("title").innerText=`${articleData.name}`}))},displaySingleArticle=async()=>{await fetchSingleArticle().then((()=>{let e=`\n                 <div class="col-lg-6 offset-lg-3">\n                    <div class="card">\n                      <img src="${articleData.imageUrl}" class="card-img-top photo-change" alt="image de ${articleData.name}">\n                      <div class="card-body">\n                          <h1 class="card-title">${articleData.name}</h1>        \n                          <p class=>${articleData.description}</p><p>${articleData.price/100}.00 €</p>\n\n                          <label for="quantite-select">Quantité :</label>\n                          <select name="quantite" id="quantite" \n                            <option value="">---</option>\n                            <option value="1">1</option>\n                            <option value="2">2</option>\n                            <option value="3">3</option></select><br><br>\n                            <label for="pet-select">Choisissez une lentille: </label>\n\n                          <select name="vernis" class="lense-select">\n                            <option value="">----</option> \n                          </select> \n                                    \n                      </div>\n                    </div>\n                </div>\n                                \n                      `;document.getElementById("single-article").innerHTML=e})).then((()=>{const e=articleData.lenses;for(let t of e){let e=document.createElement("option");document.querySelector(".lense-select").appendChild(e),e.textContent=t}})).catch((e=>"erreur: "+e))};displaySingleArticle();const addToCart=async()=>{await displaySingleArticle(),document.getElementById("submit").addEventListener("click",(()=>{let e=document.getElementById("quantite").value,t={ImgArticle:articleData.imageUrl,IdArticle:articleData._id,NameArticle:articleData.name,PriceArticle:articleData.price/100+".00",QuantiteArticle:e},a=JSON.parse(localStorage.getItem("produit"));a?(a.push(t),localStorage.setItem("produit",JSON.stringify(a))):(a=[],a.push(t),localStorage.setItem("produit",JSON.stringify(a)))}))};addToCart();